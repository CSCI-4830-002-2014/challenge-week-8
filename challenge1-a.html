<!DOCTYPE html>
<html lang="en">
  <svg class="chart"></svg>
  <style>
    .chart rect {
        fill: steelblue;
    }

    .chart text {
        fill: white;
        font: 10px sans-serif;
        text-anchor: end;
    }
  </style>
  <head>
      <meta charset="utf-8">
      <title>D3</title>
      <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.12/d3.min.js"></script>
      <style type="text/css">
      </style>
  </head>
  <body>
    <script type="text/javascript">
      var width = 420;
      var barHeight = 20;

      var x = d3
          .scale
          .linear()
          .range([0, width]);

      var chart = d3
          .select(".chart")
          .attr("width", width);

      var link = "https://api.github.com/orgs/csci-4830-002-2014/repos"

      d3.json(link, function(error, data) {
        x.domain([0, d3.max(data, function(d) { return d.forks_count; })]);

        chart.attr("height", barHeight * data.length);

        var bar = chart.selectAll("g")
            .data(data)
            .enter()
            .append("g")
            .attr("transform", function(d, i) { return "translate(0," + i * (barHeight / 1.3) + ")"; });

        bar.append("rect")
            .attr("width", function(d) { return x(d.forks_count); })
            .attr("height", barHeight / 1.5);

        bar.append("text")
            .attr("x", function(d) { return x(d.forks_count) - 3; })
            .attr("y", barHeight - 13)
            .attr("dy", ".35em")
            .text(function(d) { return d.forks_count; });

      });

      function type(d) {
        d.forks_count = +d.forks_count;
        return d;
      }
    </script>
  </body>
</html>
